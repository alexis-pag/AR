<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.5.4/dist/aframe-extras.min.js"></script>
  </head>
  <body>
    <a-scene mindar-image="imageTargetSrc: ./targets-2.mind;" 
             color-space="sRGB" 
             renderer="colorManagement: true, physicallyCorrectLights" 
             vr-mode-ui="enabled: false" 
             device-orientation-permission-ui="enabled: false">

      <a-assets>
        <a-asset-item id="back" src="./assets/Back.obj"></a-asset-item>
        <a-asset-item id="left" src="./assets/Left.obj"></a-asset-item>
        <a-asset-item id="right" src="./assets/Right.obj"></a-asset-item>
        <a-asset-item id="Batteries" src="./assets/Batteries.obj"></a-asset-item>
        <a-asset-item id="Open" src="./assets/Open.obj"></a-asset-item>
        <a-asset-item id="Speaker" src="./assets/Speaker.obj"></a-asset-item>
        <a-asset-item id="Led" src="./assets/led.obj"></a-asset-item>
        <a-asset-item id="partie-avant" src="./assets/partie-avant.obj"></a-asset-item>
        <a-asset-item id="bas" src="./assets/bas.obj"></a-asset-item>
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

      <!-- Target AR -->
      <a-entity mindar-image-target="targetIndex: 0">
        <!-- Parent stable pour réduire le jitter -->
        <a-entity id="stable-parent" position="0 0 0" aframe-extras="look-at: 0 0 0; damping: 0.05">
          
          <!-- Objet tournant sur lui-même -->
          <a-entity id="enceinte" position="0 0 0" scale="0.001 0.001 0.001"
                    rotation="0 0 0"
                    animation="property: rotation; to: 0 360 0; loop: true; dur: 5000; easing: linear">
            
            <a-entity id="back" obj-model="obj: #back" position="-20.15299 4.74877 -54.67917" rotation="0 90 0" scale="1 1 1" material="color: #ffff80"></a-entity>
            <a-entity id="Left" obj-model="obj: #left" position="-31.10108 62.18591 -69.24553" rotation="0 0 90" scale="1 1 1" material="color: #8080c0"></a-entity>
            <a-entity id="Right" obj-model="obj: #right" position="-89.76148 21.65531 21.74075" rotation="0 0 -90" scale="1 1 1" material="color: #8000ff"></a-entity>
            <a-entity id="Batteries" obj-model="obj: #Batteries" position="-78.80972 35.7123 9.96086" rotation="-89.9996 -88.5827 0" scale="1 1 1" material="color: #80ffff"></a-entity>
            <a-entity id="Open" obj-model="obj: #Open" position="-43.66647 18.64757 -44.24839" rotation="0 90 0" scale="1 1 1" material="color: #ffff00"></a-entity>
            <a-entity id="Speaker" obj-model="obj: #Speaker" position="-85.89407 11.82067 7.85191" rotation="0 -90 0" scale="1 1 1" material="color: #ff8000"></a-entity>
            <a-entity id="Led" obj-model="obj: #Led" position="-59.96779 77.85118 -19.66102" rotation="0 0 0" scale="1 1 1" material="color: #0080c0"></a-entity>
            <a-entity id="partie-avant" obj-model="obj: #partie-avant" position="-107.78422 29.11701 -19.38373" rotation="-90 90 0" scale="1 1 1" material="color: #ff0000"></a-entity>
            <a-entity id="bas" obj-model="obj: #bas" position="-59.65366 -18.19764 -19.1577" rotation="0 90 0" scale="1 1 1" material="side: double; color: #ff80c0"></a-entity>

          </a-entity>
        </a-entity>
      </a-entity>

    </a-scene>
  </body>
</html>
